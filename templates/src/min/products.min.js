import{products}from"../data/data.js";const filterProducts=(e,t)=>{if(!e||!e.length||!t)return[];let r=[...e];if(t.price&&void 0!==t.price.min&&void 0!==t.price.max&&(r=r.filter((e=>e.price>=t.price.min&&e.price<=t.price.max))),t.model&&t.model.length>0&&(r=r.filter((e=>t.model.includes(e.model)))),t.collection&&t.collection.length>0&&(r=r.filter((e=>t.collection.includes(e.collection)))),t.sort&&t.sort.orderByPrice)switch(t.sort.orderByPrice){case"asc":r.sort(((e,t)=>e.price-t.price));break;case"desc":r.sort(((e,t)=>t.price-e.price))}return t.sort&&t.sort.orderByModel&&"asc"===t.sort.orderByModel&&r.sort(((e,t)=>e.model.localeCompare(t.model))),t.search&&""!==t.search.query&&(r=r.filter((e=>e.name.toLowerCase().includes(t.search.query.toLowerCase())))),r},countFilters=e=>{let t=0;return e.model&&e.model.length>0&&(t+=e.model.length),e.collection&&e.collection.length>0&&(t+=e.collection.length),!e.price||void 0===e.price.min&&void 0===e.price.max||t++,e.search&&""!==e.search.query&&t++,t||""},showProducts=(e,t)=>{const r=filterProducts(e,t);renderMenu(r,countFilters(t))},renderMenu=(e,t)=>{document.getElementById("filters-text").innerText=`${t} Filter${1!==t?"s":""}`;const r=document.getElementById("products-container");r.innerHTML="",0===e.length?r.innerHTML=createEmptyProductsHTML():e.forEach((e=>{const t=createProductsHTML(e);r.innerHTML+=t}))},createEmptyProductsHTML=()=>'\n  <div class="h-96 w-full flex items-center justify-center col-span-full flex-col">\n      <h2 class="text-lg font-medium text-gray-900">Sorry, no products found</h2>\n      <p class="mt-1 text-sm text-gray-500">Please clear the filters to see all products</p>\n  </div>\n',createProductsHTML=e=>`\n  <div class="group relative">\n      <div class="bg-w h-56 w-full overflow-hidden rounded-md group-hover:opacity-75 lg:h-72 xl:h-80 p-4">\n          <img\n              width=180\n              height=320\n              src="${e.image}"\n              alt="${e.name}"\n              class="object-fit h-full w-full object-contain object-center"\n          />\n      </div>\n      <h3 class="mt-4 text-sm text-gray-700">\n          <a href="product.html">\n              <span class="absolute inset-0"></span>\n              ${e.name}\n          </a>\n      </h3>\n      <p class="mt-1 text-sm text-gray-500">${e.label}</p>\n      <p class="mt-1 text-sm font-medium text-gray-900">$${e.price}</p>\n  </div>\n`,createProxiedProperty=(e,t)=>new Proxy(e,{set:(e,r,o)=>(e[r]=o,t(),!0)}),createFilterState=e=>{const t={model:createProxiedProperty([],(()=>showProducts(e,t))),price:createProxiedProperty({min:void 0,max:void 0},(()=>showProducts(e,t))),collection:createProxiedProperty([],(()=>showProducts(e,t))),sort:createProxiedProperty({orderByPrice:void 0,orderByModel:void 0},(()=>showProducts(e,t))),search:createProxiedProperty({query:""},(()=>showProducts(e,t)))};return showProducts(e,t),t},renderFilters=()=>{let e=createFilterState(products),t=!1;const r=document.getElementById("filters-button"),o=document.getElementById("filters-menu");r.addEventListener("click",(()=>{t=!t,o.style.display=t?"block":"none"}));const c=document.getElementById("search");c.addEventListener("input",(t=>{e.search.query=t.target.value,console.log(e.search.query)}));const n=document.getElementById("filter-form");let l=!1;const i=document.getElementById("menu-button"),s=document.getElementById("menu");i.addEventListener("click",(()=>{l=!l,s.style.display=l?"block":"none"}));const d=[document.getElementById("menu-item-0"),document.getElementById("menu-item-1"),document.getElementById("menu-item-2")],a={active:void 0};d.forEach((t=>{t.addEventListener("click",(r=>{if(a.active===r.target.id)t.className="text-gray-500 block px-4 py-2 text-sm hover:bg-indigo-100",a.active=void 0,e.sort.orderByPrice=void 0,e.sort.orderByModel=void 0;else switch(void 0!==a.active&&d.forEach((e=>{e.className="text-gray-500 block px-4 py-2 text-sm hover:bg-indigo-100"})),a.active=r.target.id,t.className="bg-gray-100 font-medium text-gray-900 block px-4 py-2 text-sm hover:bg-gray-200",r.target.innerText){case"Lowest Price":e.sort.orderByPrice="asc";break;case"Highest Price":e.sort.orderByPrice="desc";break;case"Model":e.sort.orderByModel="asc"}l=!1,s.style.display="none"}))}));document.getElementById("price-filter").addEventListener("change",(t=>{[e.price.min,e.price.max]=t.target.value.split("-")}));document.getElementById("model-filter").addEventListener("change",(t=>{t.target.checked?e.model.push(t.target.value):e.model.splice(e.model.indexOf(t.target.value),1)}));document.getElementById("collection-filter").addEventListener("change",(t=>{t.target.checked?e.collection.push(t.target.value):e.collection.splice(e.collection.indexOf(t.target.value),1)}));document.getElementById("clear-filters").addEventListener("click",(()=>{o.style.display="none",countFilters(e)>0&&(e=createFilterState(products),n.reset()),c.value=""}))};document.addEventListener("DOMContentLoaded",(()=>{renderFilters()}));
