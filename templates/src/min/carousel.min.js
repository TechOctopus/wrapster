const Default={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:()=>{},onPrev:()=>{},onChange:()=>{}},DefaultInstanceOptions={id:null,override:!0};class Carousel{_instanceId;_carouselEl;_items;_indicators;_activeItem;_intervalDuration;_intervalInstance;_options;_initialized;constructor(t,i,e,s){this._instanceId=s.id?s.id:t.id,this._carouselEl=t,this._items=i,this._options={...Default,...e,indicators:{...Default.indicators,...e.indicators}},this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init()}init(){this._items.length&&!this._initialized&&(this._items.map((t=>{t.el.classList.add("absolute","inset-0","transition-transform","transform")})),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(((t,i)=>{t.el.addEventListener("click",(()=>{this.slideTo(i)}))})),this._initialized=!0)}destroy(){this._initialized&&(this._initialized=!1)}getItem(t){return this._items[t]}slideTo(t){const i=this._items[t],e={left:0===i.position?this._items[this._items.length-1]:this._items[i.position-1],middle:i,right:i.position===this._items.length-1?this._items[0]:this._items[i.position+1]};this._rotate(e),this._setActiveItem(i),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)}next(){const t=this.getActiveItem();let i=null;i=t.position===this._items.length-1?this._items[0]:this._items[t.position+1],this.slideTo(i.position),this._options.onNext(this)}prev(){const t=this.getActiveItem();let i=null;i=0===t.position?this._items[this._items.length-1]:this._items[t.position-1],this.slideTo(i.position),this._options.onPrev(this)}_rotate(t){if(this._items.map((t=>{t.el.classList.add("hidden")})),1===this._items.length)return t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),void t.middle.el.classList.add("translate-x-0","z-20");t.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.left.el.classList.add("-translate-x-full","z-10"),t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-30"),t.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),t.right.el.classList.add("translate-x-full","z-20")}cycle(){"undefined"!=typeof window&&(this._intervalInstance=window.setInterval((()=>{this.next()}),this._intervalDuration))}pause(){clearInterval(this._intervalInstance)}getActiveItem(){return this._activeItem}_setActiveItem(t){this._activeItem=t;const i=t.position;this._indicators.length&&(this._indicators.map((t=>{t.el.setAttribute("aria-current","false"),t.el.classList.remove(...this._options.indicators.activeClasses.split(" ")),t.el.classList.add(...this._options.indicators.inactiveClasses.split(" "))})),this._indicators[i].el.classList.add(...this._options.indicators.activeClasses.split(" ")),this._indicators[i].el.classList.remove(...this._options.indicators.inactiveClasses.split(" ")),this._indicators[i].el.setAttribute("aria-current","true"))}updateOnNext(t){this._options.onNext=t}updateOnPrev(t){this._options.onPrev=t}updateOnChange(t){this._options.onChange=t}}export function initCarousels(){document.querySelectorAll("[data-carousel]").forEach((t=>{const i=t.getAttribute("data-carousel-interval"),e="slide"===t.getAttribute("data-carousel"),s=[];let a=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map(((t,i)=>{s.push({position:i,el:t}),"active"===t.getAttribute("data-carousel-item")&&(a=i)}));const l=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map((t=>{l.push({position:parseInt(t.getAttribute("data-carousel-slide-to")),el:t})}));const n=new Carousel(t,s,{defaultPosition:a,indicators:{items:l},interval:i||Default.interval});e&&n.cycle();const o=t.querySelector("[data-carousel-next]"),r=t.querySelector("[data-carousel-prev]");o&&o.addEventListener("click",(()=>{n.next()})),r&&r.addEventListener("click",(()=>{n.prev()}))}))}"undefined"!=typeof window&&(window.Carousel=Carousel,window.initCarousels=initCarousels);export default Carousel;
